import{c as Ut,r as n,j as e,e as Ze,n as ae,s as $,h as se,k as _,o as ve,l as Vt,q as Xe,a as R,v as Gt,P as je,m as Kt,w as zt,u as Ht,X as ie,t as F}from"./index-CBGP0-9V.js";import{B as L}from"./button-CiArJRhC.js";import{u as Je,C as M,a as U}from"./index-BzXJQprt.js";import{u as Ne}from"./index-jn0p1ufw.js";import{R as Wt,P as qt,a as Qe,T as et,O as tt,D as st,C as $e}from"./index-DCyT9wRJ.js";import{A as Q,a as ce,b as ee}from"./avatar-CZoOSk0v.js";import{t as Yt,g as Zt,a as Xt,b as Jt,c as Qt,d as es,s as ts,e as ss}from"./task-CaSVpYz-.js";import{f as Me,a as as,b as rs}from"./publicFun-CiZ9vL8Y.js";import{A as ns,F as os,a as te,I as Ue,b as Ve,c as Ge}from"./task-status-C8h5zVQz.js";import{f as Ke}from"./public-DIX_InEl.js";import{C as ls}from"./chevron-left-BTOK750O.js";import{P as ze}from"./plus-CHP_XERv.js";import{S as is}from"./search-DxQ-bB_0.js";import{C as D}from"./check-4WT4jp_I.js";import{C as cs}from"./chevron-right-Bag1OeAJ.js";import{S as ds}from"./save-ry2PriRR.js";import"./request-CRuLXg2Q.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ms=Ut("clock",us);function ue(t){const s=ps(t),l=n.forwardRef((o,i)=>{const{children:u,...c}=o,m=n.Children.toArray(u),p=m.find(xs);if(p){const f=p.props.children,x=m.map(h=>h===p?n.Children.count(f)>1?n.Children.only(null):n.isValidElement(f)?f.props.children:null:h);return e.jsx(s,{...c,ref:i,children:n.isValidElement(f)?n.cloneElement(f,void 0,x):null})}return e.jsx(s,{...c,ref:i,children:u})});return l.displayName=`${t}.Slot`,l}function ps(t){const s=n.forwardRef((l,o)=>{const{children:i,...u}=l;if(n.isValidElement(i)){const c=gs(i),m=hs(u,i.props);return i.type!==n.Fragment&&(m.ref=o?Ze(o,c):c),n.cloneElement(i,m)}return n.Children.count(i)>1?n.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var fs=Symbol("radix.slottable");function xs(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fs}function hs(t,s){const l={...s};for(const o in s){const i=t[o],u=s[o];/^on[A-Z]/.test(o)?i&&u?l[o]=(...m)=>{const p=u(...m);return i(...m),p}:i&&(l[o]=i):o==="style"?l[o]={...i,...u}:o==="className"&&(l[o]=[i,u].filter(Boolean).join(" "))}return{...t,...l}}function gs(t){var o,i;let s=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,l=s&&"isReactWarning"in s&&s.isReactWarning;return l?t.ref:(s=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,l=s&&"isReactWarning"in s&&s.isReactWarning,l?t.props.ref:t.props.ref||t.ref)}function bs(t){const s=t+"CollectionProvider",[l,o]=ae(s),[i,u]=l(s,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:b,children:N}=w,v=$.useRef(null),y=$.useRef(new Map).current;return e.jsx(i,{scope:b,itemMap:y,collectionRef:v,children:N})};c.displayName=s;const m=t+"CollectionSlot",p=ue(m),f=$.forwardRef((w,b)=>{const{scope:N,children:v}=w,y=u(m,N),T=se(b,y.collectionRef);return e.jsx(p,{ref:T,children:v})});f.displayName=m;const x=t+"CollectionItemSlot",h="data-radix-collection-item",C=ue(x),a=$.forwardRef((w,b)=>{const{scope:N,children:v,...y}=w,T=$.useRef(null),P=se(b,T),O=u(x,N);return $.useEffect(()=>(O.itemMap.set(T,{ref:T,...y}),()=>void O.itemMap.delete(T))),e.jsx(C,{[h]:"",ref:P,children:v})});a.displayName=x;function A(w){const b=u(t+"CollectionConsumer",w);return $.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((O,k)=>y.indexOf(O.ref.current)-y.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:f,ItemSlot:a},A,o]}var vs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],at=vs.reduce((t,s)=>{const l=ue(`Primitive.${s}`),o=n.forwardRef((i,u)=>{const{asChild:c,...m}=i,p=c?l:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(p,{...m,ref:u})});return o.displayName=`Primitive.${s}`,{...t,[s]:o}},{}),de="rovingFocusGroup.onEntryFocus",js={bubbles:!1,cancelable:!0},H="RovingFocusGroup",[me,rt,Ns]=bs(H),[ys,nt]=ae(H,[Ns]),[ws,Es]=ys(H),ot=n.forwardRef((t,s)=>e.jsx(me.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(me.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Cs,{...t,ref:s})})}));ot.displayName=H;var Cs=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:l,orientation:o,loop:i=!1,dir:u,currentTabStopId:c,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:p,onEntryFocus:f,preventScrollOnEntryFocus:x=!1,...h}=t,C=n.useRef(null),a=se(s,C),A=Je(u),[w,b]=ve({prop:c,defaultProp:m??null,onChange:p,caller:H}),[N,v]=n.useState(!1),y=Vt(f),T=rt(l),P=n.useRef(!1),[O,k]=n.useState(0);return n.useEffect(()=>{const S=C.current;if(S)return S.addEventListener(de,y),()=>S.removeEventListener(de,y)},[y]),e.jsx(ws,{scope:l,orientation:o,dir:A,loop:i,currentTabStopId:w,onItemFocus:n.useCallback(S=>b(S),[b]),onItemShiftTab:n.useCallback(()=>v(!0),[]),onFocusableItemAdd:n.useCallback(()=>k(S=>S+1),[]),onFocusableItemRemove:n.useCallback(()=>k(S=>S-1),[]),children:e.jsx(at.div,{tabIndex:N||O===0?-1:0,"data-orientation":o,...h,ref:a,style:{outline:"none",...t.style},onMouseDown:_(t.onMouseDown,()=>{P.current=!0}),onFocus:_(t.onFocus,S=>{const W=!P.current;if(S.target===S.currentTarget&&W&&!N){const q=new CustomEvent(de,js);if(S.currentTarget.dispatchEvent(q),!q.defaultPrevented){const V=T().filter(I=>I.focusable),B=V.find(I=>I.active),Y=V.find(I=>I.id===w),Z=[B,Y,...V].filter(Boolean).map(I=>I.ref.current);ct(Z,x)}}P.current=!1}),onBlur:_(t.onBlur,()=>v(!1))})})}),lt="RovingFocusGroupItem",it=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:l,focusable:o=!0,active:i=!1,tabStopId:u,children:c,...m}=t,p=Ne(),f=u||p,x=Es(lt,l),h=x.currentTabStopId===f,C=rt(l),{onFocusableItemAdd:a,onFocusableItemRemove:A,currentTabStopId:w}=x;return n.useEffect(()=>{if(o)return a(),()=>A()},[o,a,A]),e.jsx(me.ItemSlot,{scope:l,id:f,focusable:o,active:i,children:e.jsx(at.span,{tabIndex:h?0:-1,"data-orientation":x.orientation,...m,ref:s,onMouseDown:_(t.onMouseDown,b=>{o?x.onItemFocus(f):b.preventDefault()}),onFocus:_(t.onFocus,()=>x.onItemFocus(f)),onKeyDown:_(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){x.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=Rs(b,x.orientation,x.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let y=C().filter(T=>T.focusable).map(T=>T.ref.current);if(N==="last")y.reverse();else if(N==="prev"||N==="next"){N==="prev"&&y.reverse();const T=y.indexOf(b.currentTarget);y=x.loop?Is(y,T+1):y.slice(T+1)}setTimeout(()=>ct(y))}}),children:typeof c=="function"?c({isCurrentTabStop:h,hasTabStop:w!=null}):c})})});it.displayName=lt;var Ts={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ss(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Rs(t,s,l){const o=Ss(t.key,l);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ts[o]}function ct(t,s=!1){const l=document.activeElement;for(const o of t)if(o===l||(o.focus({preventScroll:s}),document.activeElement!==l))return}function Is(t,s){return t.map((l,o)=>t[(s+o)%t.length])}var As=ot,Fs=it;function ks(t){const s=Ps(t),l=n.forwardRef((o,i)=>{const{children:u,...c}=o,m=n.Children.toArray(u),p=m.find(Ls);if(p){const f=p.props.children,x=m.map(h=>h===p?n.Children.count(f)>1?n.Children.only(null):n.isValidElement(f)?f.props.children:null:h);return e.jsx(s,{...c,ref:i,children:n.isValidElement(f)?n.cloneElement(f,void 0,x):null})}return e.jsx(s,{...c,ref:i,children:u})});return l.displayName=`${t}.Slot`,l}function Ps(t){const s=n.forwardRef((l,o)=>{const{children:i,...u}=l;if(n.isValidElement(i)){const c=Os(i),m=Ds(u,i.props);return i.type!==n.Fragment&&(m.ref=o?Ze(o,c):c),n.cloneElement(i,m)}return n.Children.count(i)>1?n.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var _s=Symbol("radix.slottable");function Ls(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===_s}function Ds(t,s){const l={...s};for(const o in s){const i=t[o],u=s[o];/^on[A-Z]/.test(o)?i&&u?l[o]=(...m)=>{const p=u(...m);return i(...m),p}:i&&(l[o]=i):o==="style"?l[o]={...i,...u}:o==="className"&&(l[o]=[i,u].filter(Boolean).join(" "))}return{...t,...l}}function Os(t){var o,i;let s=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,l=s&&"isReactWarning"in s&&s.isReactWarning;return l?t.ref:(s=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,l=s&&"isReactWarning"in s&&s.isReactWarning,l?t.props.ref:t.props.ref||t.ref)}var Bs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],re=Bs.reduce((t,s)=>{const l=ks(`Primitive.${s}`),o=n.forwardRef((i,u)=>{const{asChild:c,...m}=i,p=c?l:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(p,{...m,ref:u})});return o.displayName=`Primitive.${s}`,{...t,[s]:o}},{}),ne="Tabs",[$s,pa]=ae(ne,[nt]),dt=nt(),[Ms,ye]=$s(ne),ut=n.forwardRef((t,s)=>{const{__scopeTabs:l,value:o,onValueChange:i,defaultValue:u,orientation:c="horizontal",dir:m,activationMode:p="automatic",...f}=t,x=Je(m),[h,C]=ve({prop:o,onChange:i,defaultProp:u??"",caller:ne});return e.jsx(Ms,{scope:l,baseId:Ne(),value:h,onValueChange:C,orientation:c,dir:x,activationMode:p,children:e.jsx(re.div,{dir:x,"data-orientation":c,...f,ref:s})})});ut.displayName=ne;var mt="TabsList",pt=n.forwardRef((t,s)=>{const{__scopeTabs:l,loop:o=!0,...i}=t,u=ye(mt,l),c=dt(l);return e.jsx(As,{asChild:!0,...c,orientation:u.orientation,dir:u.dir,loop:o,children:e.jsx(re.div,{role:"tablist","aria-orientation":u.orientation,...i,ref:s})})});pt.displayName=mt;var ft="TabsTrigger",xt=n.forwardRef((t,s)=>{const{__scopeTabs:l,value:o,disabled:i=!1,...u}=t,c=ye(ft,l),m=dt(l),p=bt(c.baseId,o),f=vt(c.baseId,o),x=o===c.value;return e.jsx(Fs,{asChild:!0,...m,focusable:!i,active:x,children:e.jsx(re.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:p,...u,ref:s,onMouseDown:_(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?c.onValueChange(o):h.preventDefault()}),onKeyDown:_(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&c.onValueChange(o)}),onFocus:_(t.onFocus,()=>{const h=c.activationMode!=="manual";!x&&!i&&h&&c.onValueChange(o)})})})});xt.displayName=ft;var ht="TabsContent",gt=n.forwardRef((t,s)=>{const{__scopeTabs:l,value:o,forceMount:i,children:u,...c}=t,m=ye(ht,l),p=bt(m.baseId,o),f=vt(m.baseId,o),x=o===m.value,h=n.useRef(x);return n.useEffect(()=>{const C=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(C)},[]),e.jsx(Xe,{present:i||x,children:({present:C})=>e.jsx(re.div,{"data-state":x?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":p,hidden:!C,id:f,tabIndex:0,...c,ref:s,style:{...t.style,animationDuration:h.current?"0s":void 0},children:C&&u})})});gt.displayName=ht;function bt(t,s){return`${t}-trigger-${s}`}function vt(t,s){return`${t}-content-${s}`}var Us=ut,jt=pt,Nt=xt,yt=gt;const Vs=Us,wt=n.forwardRef(({className:t,...s},l)=>e.jsx(jt,{ref:l,className:R("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));wt.displayName=jt.displayName;const pe=n.forwardRef(({className:t,...s},l)=>e.jsx(Nt,{ref:l,className:R("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));pe.displayName=Nt.displayName;const fe=n.forwardRef(({className:t,...s},l)=>e.jsx(yt,{ref:l,className:R("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));fe.displayName=yt.displayName;const He=Wt,Gs=qt,Et=n.forwardRef(({className:t,...s},l)=>e.jsx(tt,{ref:l,className:R("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Et.displayName=tt.displayName;const xe=n.forwardRef(({className:t,children:s,...l},o)=>e.jsxs(Gs,{children:[e.jsx(Et,{}),e.jsx(Qe,{ref:o,className:R("fixed left-[50%] top-[50%] z-50 translate-x-[-50%] translate-y-[-50%] bg-white shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",t),...l,children:s})]}));xe.displayName=Qe.displayName;const he=({className:t,...s})=>e.jsx("div",{className:R("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});he.displayName="DialogHeader";const ge=({className:t,...s})=>e.jsx("div",{className:R("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ge.displayName="DialogFooter";const be=n.forwardRef(({className:t,...s},l)=>e.jsx(et,{ref:l,className:R("text-lg font-semibold leading-none tracking-tight",t),...s}));be.displayName=et.displayName;const Ks=n.forwardRef(({className:t,...s},l)=>e.jsx(st,{ref:l,className:R("text-sm text-gray-500",t),...s}));Ks.displayName=st.displayName;const zs=Gt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z({className:t,variant:s,...l}){return e.jsx("div",{className:R(zs({variant:s}),t),...l})}var oe="Collapsible",[Hs,fa]=ae(oe),[Ws,we]=Hs(oe),Ct=n.forwardRef((t,s)=>{const{__scopeCollapsible:l,open:o,defaultOpen:i,disabled:u,onOpenChange:c,...m}=t,[p,f]=ve({prop:o,defaultProp:i??!1,onChange:c,caller:oe});return e.jsx(Ws,{scope:l,disabled:u,contentId:Ne(),open:p,onOpenToggle:n.useCallback(()=>f(x=>!x),[f]),children:e.jsx(je.div,{"data-state":Ce(p),"data-disabled":u?"":void 0,...m,ref:s})})});Ct.displayName=oe;var Tt="CollapsibleTrigger",St=n.forwardRef((t,s)=>{const{__scopeCollapsible:l,...o}=t,i=we(Tt,l);return e.jsx(je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Ce(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...o,ref:s,onClick:_(t.onClick,i.onOpenToggle)})});St.displayName=Tt;var Ee="CollapsibleContent",Rt=n.forwardRef((t,s)=>{const{forceMount:l,...o}=t,i=we(Ee,t.__scopeCollapsible);return e.jsx(Xe,{present:l||i.open,children:({present:u})=>e.jsx(qs,{...o,ref:s,present:u})})});Rt.displayName=Ee;var qs=n.forwardRef((t,s)=>{const{__scopeCollapsible:l,present:o,children:i,...u}=t,c=we(Ee,l),[m,p]=n.useState(o),f=n.useRef(null),x=se(s,f),h=n.useRef(0),C=h.current,a=n.useRef(0),A=a.current,w=c.open||m,b=n.useRef(w),N=n.useRef(void 0);return n.useEffect(()=>{const v=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(v)},[]),Kt(()=>{const v=f.current;if(v){N.current=N.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const y=v.getBoundingClientRect();h.current=y.height,a.current=y.width,b.current||(v.style.transitionDuration=N.current.transitionDuration,v.style.animationName=N.current.animationName),p(o)}},[c.open,o]),e.jsx(je.div,{"data-state":Ce(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!w,...u,ref:x,style:{"--radix-collapsible-content-height":C?`${C}px`:void 0,"--radix-collapsible-content-width":A?`${A}px`:void 0,...t.style},children:w&&i})});function Ce(t){return t?"open":"closed"}var Ys=Ct;function We({...t}){return e.jsx(Ys,{"data-slot":"collapsible",...t})}function qe({...t}){return e.jsx(St,{"data-slot":"collapsible-trigger",...t})}function Ye({...t}){return e.jsx(Rt,{"data-slot":"collapsible-content",...t})}function xa(){var Pe,_e,Le,De,Oe,Be;const t=n.useRef(!1),{id:s}=zt(),l=Ht(),[o,i]=n.useState(!1),[u,c]=n.useState(!1),[m,p]=n.useState(!1),[f,x]=n.useState(!1),[h,C]=n.useState("details"),[a,A]=n.useState({id:"",taskTitle:"",taskDescription:"",taskTypeKey:"",taskType:"",flowStatus:"",approvalStatus:"",attachment:"",attachments:null,projectName:"",taskGroupName:"",startDate:"",endDate:"",participantsUserList:null,approverUserList:null,creatorUser:null,subtaskList:null,progress:0,reviewButton:"0",saveButton:"0",templateList:null,isyq:"0",isTemplateFile:"0"}),[w,b]=n.useState([]),[N,v]=n.useState(!1),[y,T]=n.useState(""),[P,O]=n.useState(null),[k,S]=n.useState(!1),W=n.useRef(null),[q,V]=n.useState(!0),[B,Y]=n.useState([]),[G,Z]=n.useState([]),[I,Te]=n.useState(!1),Se=n.useRef(null),[Re,Ie]=n.useState(!1),[le,It]=n.useState(""),[X,At]=n.useState([]),[J,Ae]=n.useState("");localStorage.getItem("ACCESS_USER_ID");const Ft=async()=>{try{const r=await Yt({taskId:s});console.log("res",r),r?(c(!1),F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3}),setTimeout(()=>{l("/app/workspace")},2e3)):(c(!1),p(!0))}catch(r){console.log("e",r),c(!1),T((r==null?void 0:r.msg)||"删除操作失败"),p(!0)}},kt=async()=>{V(!0),Zt({taskId:s}).then(async r=>{let d=r,g=[];if(d!=null&&d.attachment){let j=d.attachment;j&&(g=j.split(","))}Y(g),console.log("task",d),A(d),Ae(d.taskTypeKey),d.saveButton==="1"&&Pt((d==null?void 0:d.taskTypeKey)||"")}).catch(r=>{F({variant:"destructive",title:"获取数据失败",description:(r==null?void 0:r.msg)||"获取数据失败"})}).finally(()=>{V(!1)})},Pt=async r=>{Xt({fieldName:"taskType",taskType:r}).then(async d=>{At(d||[])}).catch(d=>{})},Fe=n.useMemo(()=>X.filter(r=>r.value.toLowerCase().includes(le.toLowerCase())),[X,le]),_t=async()=>{Jt({taskId:s}).then(async r=>{const d=[...r].sort((g,j)=>new Date(j.createTime).getTime()-new Date(g.createTime).getTime());b(d)}).catch(r=>{})};n.useEffect(()=>{t.current||(t.current=!0,kt(),_t())},[]);const Lt=async()=>{try{v(!0),await Qt({taskId:s})&&(F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3}),setTimeout(()=>{l("/app/workspace")},2e3))}catch(r){v(!1),F({variant:"destructive",title:"操作失败",description:(r==null?void 0:r.msg)||"审批操作失败"})}},Dt=async()=>{try{v(!0),await es({taskId:s})&&(F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3}),setTimeout(()=>{l("/app/workspace")},2e3))}catch(r){v(!1),F({variant:"destructive",title:"操作失败",description:(r==null?void 0:r.msg)||"拒绝操作失败"})}},Ot=async()=>{var r;try{v(!0);const g=[...B,...G].join(","),j={id:Number(s),progress:String(a.progress||0),taskType:J||(a==null?void 0:a.taskTypeKey),attachment:g,subtaskDOList:((r=a.subtaskList)==null?void 0:r.map(K=>({id:Number(K.id),completed:K.completed,subtaskProgress:String(K.completed=="1"?100:0)})))||[]};await ts(j)?(v(!1),F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3})):v(!1)}catch(d){v(!1),F({variant:"destructive",title:"保存失败",description:(d==null?void 0:d.msg)||"保存任务进度时出错"})}},Bt=async r=>{const d=r.target.files;if(d&&d.length>0&&!I){Te(!0);try{for(let g=0;g<d.length;g++){const j=d[g],E=new FormData;E.append("file",j);const K=await Ke(E);K&&Z(Mt=>[...Mt,K])}F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3})}catch(g){F({variant:"destructive",title:"上传失败",description:(g==null?void 0:g.msg)||"请检查网络连接后重试"})}finally{Te(!1),r.target&&(r.target.value="")}}},ke=(r,d)=>{d?Z(g=>g.filter((j,E)=>E!==r)):Y(g=>g.filter((j,E)=>E!==r))},$t=async r=>{var g;const d=(g=r.target.files)==null?void 0:g[0];if(d&&!k){S(!0);try{const j=new FormData;j.append("file",d);const E=await Ke(j);E&&(O(E),await ss({url:E,taskId:s,tableId:a.tableId}),F({description:e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[200px] min-h-[100px]",children:[e.jsx(D,{className:"w-10 h-10 mb-1"}),e.jsx("span",{className:"text-lg font-medium",children:"成功"})]}),variant:"default",duration:1e3}))}catch(j){F({variant:"destructive",title:"上传失败",description:(j==null?void 0:j.msg)||"请检查网络连接后重试"})}finally{S(!1),r.target&&(r.target.value="")}}};return e.jsxs("div",{className:"flex flex-col h-screen bg-[#F9FAFB]",children:[q&&e.jsxs("div",{className:"fixed inset-0 bg-white bg-opacity-80 z-50 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-gray-300 border-t-blue-500 mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"加载中..."})]}),e.jsxs("header",{className:"flex items-center px-0 py-2 bg-white border-b border-[#E8E8E8] fixed top-0 left-0 right-0 z-10",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"p-1",onClick:()=>l(-1),children:e.jsx(ls,{className:"h-6 w-6 text-[#6A7282]"})}),e.jsxs("div",{className:"flex-1 flex justify-center space-x-4",children:[e.jsx(z,{variant:"outline",className:"px-3 mr-2 rounded-full bg-gray-200 text-gray-700 text-sm font-normal border-[#E8E8E8]",children:a.progress==="10O"||(a==null?void 0:a.approvalStatus)==3?"已完成":"进行中"}),(a==null?void 0:a.approvalStatus)&&e.jsx(z,{variant:"outline",className:"px-3 mr-2 rounded-full bg-gray-200 text-gray-700 text-sm font-normal border-[#E8E8E8]",children:ns[a==null?void 0:a.approvalStatus]}),(a==null?void 0:a.isyq)==="1"&&e.jsx(z,{variant:"outline",className:"px-3 mr-2 rounded-full bg-gray-200 text-gray-700 text-sm font-normal border-[#E8E8E8]",children:"延期"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col mt-16 h-[calc(100vh-4rem-3.5rem)]",children:e.jsxs(Vs,{defaultValue:"details",className:"w-full flex-1",value:h,onValueChange:C,children:[e.jsxs(wt,{className:" grid grid-cols-2 bg-[#F3F4F6] p-1 rounded-none h-auto m-2 rounded-lg",children:[e.jsxs(pe,{value:"details",className:R("flex items-center justify-center py-2 data-[state=active]:bg-white data-[state=active]:shadow-none rounded-none rounded-lg",h==="details"?"text-[#0363E0]":"text-[#6A7282]"),children:[e.jsx(os,{className:"h-4 w-4 mr-2"}),"任务详情"]}),e.jsxs(pe,{value:"history",className:R("flex items-center justify-center py-2 data-[state=active]:bg-white data-[state=active]:shadow-none rounded-none rounded-lg",h==="history"?"text-[#0363E0]":"text-[#6A7282]"),children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"历史记录"]})]}),e.jsxs(fe,{value:"details",className:"h-full overflow-auto pb-4 m-0 p-0",children:[e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-0 bg-white",children:e.jsxs(U,{className:"p-2",children:[e.jsx("h2",{className:"text-lg font-medium mb-1",children:a.taskTitle}),e.jsx("p",{className:"text-gray-700 mb-4",children:a.taskDescription}),e.jsxs(We,{open:o,onOpenChange:i,className:"mb-0",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-[#E8E8E8]",children:[e.jsx("h3",{className:"text-gray-500",children:"其他信息"}),e.jsx(qe,{asChild:!0,children:e.jsxs(L,{variant:"ghost",size:"sm",className:"p-1 bg-[#E5E7EB] rounded h-auto text-[#6B7280]",children:["展开",e.jsx($e,{className:"h-5 w-5 text-gray-500 transition-transform",style:{transform:`rotate(${o?180:0}deg)`}})]})})]}),e.jsx(Ye,{children:e.jsx("div",{className:"mt-2 border border-[#E8E8E8] rounded-md overflow-hidden",children:e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-[#E8E8E8]",children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6] w-1/4",children:"项目名称"}),e.jsx("td",{className:"p-3",children:a.projectName})]}),e.jsxs("tr",{className:"border-b border-[#E8E8E8]",children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6]",children:"业务域"}),e.jsx("td",{className:"p-3",children:a.taskGroupName})]}),e.jsxs("tr",{className:"border-b border-[#E8E8E8]",children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6]",children:"起始日期"}),e.jsxs("td",{className:"p-3",children:[Me((a==null?void 0:a.startDate)||"")," / ",Me((a==null?void 0:a.endDate)||"")]})]}),e.jsxs("tr",{className:"border-b border-[#E8E8E8]",children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6]",children:"执行人"}),e.jsx("td",{className:"p-3 flex items-center",children:(a==null?void 0:a.participantsUserList)&&e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex -space-x-3",children:[a.participantsUserList.slice(0,3).map(r=>e.jsxs(Q,{className:"h-7 w-7 border-2 border-white bg-[#EAEAEA] shadow-sm",children:[e.jsx(ce,{src:r.avatar}),e.jsx(ee,{children:r==null?void 0:r.nickname.slice(0,1)})]},r.id)),a.participantsUserList.length>3&&e.jsx(Q,{className:"h-7 w-7 border-2 border-white bg-[#EAEAEA] shadow-sm",children:e.jsxs(ee,{className:"text-xs text-gray-500",children:["+",a.participantsUserList.length-3]})})]}),e.jsxs("span",{children:[(Pe=a.participantsUserList[0])==null?void 0:Pe.nickname,a.participantsUserList.length>1&&e.jsxs("span",{className:"text-gray-500",children:["(",((_e=a.participantsUserList[1])==null?void 0:_e.nickname)||"",a.participantsUserList.length>2&&"...","等",a.participantsUserList.length,"人执行)"]})]})]})})]}),e.jsxs("tr",{className:"border-b border-[#E8E8E8]",children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6] w-1/4 whitespace-nowrap",children:"审批人"}),e.jsx("td",{className:"p-3",children:(a==null?void 0:a.approverUserList)&&e.jsx("div",{className:"space-y-3",children:[...a.approverUserList].sort((r,d)=>r.approvalStatus==="已审批"?-1:d.approvalStatus==="已审批"?1:0).map(r=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Q,{className:"h-7 w-7 bg-[#EAEAEA] border-2 border-[#EAEAEA] border-white shadow-sm",children:[e.jsx(ce,{src:r==null?void 0:r.avatar}),e.jsx(ee,{children:r==null?void 0:r.nickname.slice(0,1)})]}),e.jsx("span",{className:"ml-2",children:r.nickname}),e.jsx("span",{className:"ml-2 text-[#6B7280] rounded-full bg-[#E5E7EB] px-2 py-1 whitespace-nowrap",style:{marginLeft:"auto"},children:r.approvalStatus})]},r.id))})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-[#F3F4F6]",children:"创建人"}),e.jsxs("td",{className:"p-3 flex items-center",children:[(a==null?void 0:a.creatorUser)&&e.jsxs(Q,{className:"w-7 h-7 bg-[#EAEAEA] rounded-full border-2 border-white shadow-sm",children:[e.jsx(ce,{src:(Le=a==null?void 0:a.creatorUser)==null?void 0:Le.avatar}),e.jsx(ee,{children:(De=a==null?void 0:a.creatorUser)==null?void 0:De.nickname.slice(0,1)})]},"creatorUser_0"),e.jsx("span",{children:(Oe=a==null?void 0:a.creatorUser)==null?void 0:Oe.nickname})]})]})]})})})})]})]})}),(a==null?void 0:a.templateList)&&a.templateList.length>0&&e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-2 bg-white",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base font-medium mb-2",children:["模板",e.jsx("span",{className:"ml-4 text-[#6B7280] rounded-full bg-[#E5E7EB] px-2 py-1 text-xs",children:(a==null?void 0:a.isFill)==="1"?"已填报":"未填报"}),(a==null?void 0:a.draftExists)&&a.draftExists==="1"&&e.jsx("span",{className:"ml-4 text-[#6B7280] rounded-full bg-[#E5E7EB] px-2 py-1 text-xs",children:"有草稿"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx("div",{className:"relative rounded-md p-1",children:e.jsx("div",{className:"text-blue-800 cursor-pointer",onClick:()=>l(`/app/report-detail?taskId=${a.id}&saveButton=${a.saveButton}&fileUrl=${encodeURIComponent(a.templateList[0].templateUrl)}`),children:a.templateList[0].templateName})},"temp")})]})})}),a.saveButton==="1"&&a.annex==="1"&&e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-2 bg-white",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"模板附件"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[P&&e.jsx("div",{className:"relative border border-[#E5E7EB] rounded-md p-1 w-24 h-24",children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(z,{className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-500 text-white",children:P.split(".").pop()||"文件"}),e.jsx(te,{className:"h-6 w-6 text-gray-400"})]})}),!P&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`h-24 w-24 border border-[#E8E8E8] rounded-lg flex items-center justify-center ${k?"cursor-not-allowed":"hover:bg-gray-50"}`,onClick:()=>{var r;return!k&&((r=W.current)==null?void 0:r.click())},disabled:k,children:k?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-[#999] border-t-transparent rounded-full"}):(a==null?void 0:a.isFill)==="1"?e.jsx(te,{className:"h-6 w-6 text-gray-400"}):e.jsx(ze,{className:"w-6 h-6 text-[#999]",strokeWidth:"1.5"})}),e.jsx("input",{type:"file",ref:W,className:"hidden",onChange:$t,disabled:k})]})]})]})})}),(B.length>0||G.length>0||a.saveButton==="1")&&e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-2 bg-white",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base font-medium mb-2",children:["附件",B.length+G.length>0&&e.jsxs("span",{className:"pl-1",children:["(",B.length+G.length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[B.map((r,d)=>{var g;if(r){const j=(g=r.split(".").pop())==null?void 0:g.toLowerCase(),E=["png","jpg","jpeg","gif","webp","bmp"].includes(j||"");return e.jsxs("div",{className:"relative border border-[#E5E7EB] rounded-md p-1 w-24 h-24",children:[E?e.jsxs(Ue,{className:"w-full h-full object-cover",children:[e.jsx(Ve,{src:r,alt:`附件-${d+1}`}),e.jsx(Ge,{className:"text-[#6B7280]"})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(z,{className:"absolute top-2 right-2 bg-red-500 hover:bg-red-500 text-white",children:j||"文件"}),e.jsx(te,{className:"h-10 w-10 text-gray-400"})]}),a.saveButton==="1"&&e.jsx(ie,{className:"absolute -top-1 -right-1 z-10 w-5 h-5 text-white bg-gray-400 rounded-full p-1 cursor-pointer hover:bg-gray-200",onClick:()=>ke(d,!1)})]},`existing_${d}`)}}),G.map((r,d)=>{var E;const g=(E=r.split(".").pop())==null?void 0:E.toLowerCase(),j=["png","jpg","jpeg","gif","webp","bmp"].includes(g||"");return e.jsxs("div",{className:"relative border border-[#E5E7EB] rounded-md p-1 w-24 h-24",children:[j?e.jsxs(Ue,{className:"w-full h-full object-cover",children:[e.jsx(Ve,{src:r,alt:`新附件-${d+1}`}),e.jsx(Ge,{className:"text-[#6B7280]"})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(z,{className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-500 text-white",children:g||"文件"}),e.jsx(te,{className:"h-10 w-10 text-gray-400"})]}),a.saveButton==="1"&&e.jsx(ie,{className:"absolute -top-1 -right-1 z-10 w-5 h-5 text-white bg-gray-400 rounded-full p-1 cursor-pointer hover:bg-gray-200",onClick:()=>ke(d,!0)})]},`new_${d}`)}),a.saveButton==="1"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`w-24 h-24 border border-[#E5E7EB] rounded-lg flex items-center justify-center ${I?"cursor-not-allowed":"hover:bg-gray-50"}`,onClick:()=>{var r;return!I&&((r=Se.current)==null?void 0:r.click())},disabled:I,children:I?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-[#999] border-t-transparent rounded-full"}):e.jsx(ze,{className:"w-6 h-6 text-[#999]",strokeWidth:"1.5"})}),e.jsx("input",{type:"file",ref:Se,className:"hidden",onChange:Bt,disabled:I,multiple:!0})]})]})]})})}),e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-2 bg-white",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"任务类型"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:a.saveButton==="1"&&X.length>1?e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"h-12 flex justify-between items-center border border-[#E5E7EB] rounded-lg cursor-pointer px-4",onClick:()=>Ie(!Re),children:[e.jsx("span",{children:((Be=X.find(r=>r.key===J))==null?void 0:Be.value)||"选择任务类型"}),e.jsx($e,{className:"w-4 h-4 text-[#6A7282]"})]}),Re&&e.jsxs("div",{className:"absolute z-50 left-0 right-0 mt-1 border border-[#E8E8E8] rounded-lg overflow-hidden bg-white shadow-lg",children:[e.jsxs("div",{className:"p-2 border-b flex items-center border-[#E8E8E8]",children:[e.jsx(is,{className:"h-5 w-5 text-[#6A7282] mr-2"}),e.jsx("input",{type:"text",placeholder:"搜索任务类型",className:"w-full outline-none placeholder:text-[#8C8C8C]",value:le,onChange:r=>It(r.target.value)})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:Fe.length>0?Fe.map(r=>e.jsxs("div",{className:`p-3 flex justify-between items-center ${J===r.key?"bg-gray-100":""}`,onClick:()=>{Ae(r.key),Ie(!1)},children:[e.jsx("span",{children:r.value}),J===r.key&&e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(D,{className:"h-4 w-4 text-white"})})]},r.key)):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"没有找到相关任务类型"})})]})]}):e.jsx(e.Fragment,{children:a.taskType})})]})})}),e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg py-2 bg-white",children:e.jsxs(U,{className:"p-4",children:[e.jsxs(We,{open:f,onOpenChange:x,className:"mb-4",children:[e.jsx(qe,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:R("h-5 w-5 mr-1 transition-transform text-[#6B7280]",f?"transform rotate-90":""),style:{transform:`rotate(${f?90:0}deg)`}}),e.jsx("span",{children:"子任务"})]}),e.jsx("span",{className:"text-blue-500",children:a.subtaskList?`${a.subtaskList.filter(r=>r.completed=="1").length} / ${a.subtaskList.length}`:"0 / 0"})]})}),e.jsx(Ye,{children:e.jsx("div",{className:"pl-6 space-y-0 mt-2",children:a.subtaskList&&a.subtaskList.map((r,d)=>e.jsxs("div",{className:"flex items-center justify-between relative pl-6 pb-6",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[r.completed=="1"?e.jsx("div",{className:"absolute left-0 top-1 h-4 w-4 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(D,{className:"h-3 w-3 text-white"})}):e.jsx("div",{className:"absolute left-0 top-1 h-4 w-4 rounded-full border-2 border-gray-200 bg-white"}),d<a.subtaskList.length-1&&e.jsx("div",{className:"absolute left-[7px] top-5 -bottom-2 w-[2px] bg-gray-200"}),e.jsx("span",{className:"text-sm",children:r.subtaskTitle})]}),e.jsx("div",{className:"relative inline-block",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r.completed=="1",onChange:g=>{const j=g.target.checked,E=[...a.subtaskList];E[d].completed=j?"1":"0",a.saveButton==="1"&&A({...a,subtaskList:E})}}),e.jsx("div",{className:R("w-9 h-5 bg-gray-200 rounded-full peer peer-checked:bg-blue-500 transition-colors","after:content-[''] after:absolute after:top-[2px] after:left-[2px]","after:bg-white after:border-gray-300 after:rounded-full after:h-4 after:w-4","after:transition-all after:duration-300",r.completed=="1"?"after:translate-x-full":"")}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:r.completed=="1"?"已完成":"未完成"})]})})]},"subtask_"+r.id))})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("h3",{className:"text-base font-medium",children:"任务进度"}),e.jsxs("span",{className:"text-[#0363E0]",children:[a.progress||0,"%"]})]}),e.jsx("div",{className:"flex space-x-1 mt-1",children:Array.from({length:10}).map((r,d)=>e.jsx("div",{className:R("h-7 flex-1 rounded cursor-pointer mr-1",d<(a.progress||0)/10?"bg-[#0363E0]":"bg-[#E5E7EB]"),onClick:()=>{const g=(d+1)*10;a.saveButton==="1"&&A(j=>({...j,progress:g}))}},d))})]}),e.jsx("div",{className:"h-30"})]})})]}),e.jsx(fe,{value:"history",className:"overflow-auto  m-0 p-0",children:e.jsx(M,{className:"border-0 rounded-none shadow-none m-2 rounded-lg bg-gray-50 py-2",children:e.jsx(U,{className:"p-4",children:w&&w.map((r,d)=>{const g=new Date(r.createTime).toDateString(),j=d>0?new Date(w[d-1].createTime).toDateString():null;return e.jsxs("div",{className:"relative pl-6 pb-6 w-full max-w-[88vw]",children:[e.jsx("div",{className:"absolute left-0 top-3 h-4 w-4 rounded-full border-2 border-gray-200 bg-white"}),d<w.length-1&&e.jsx("div",{className:"absolute left-[8px] top-8 -bottom-6 w-[2px] bg-gray-200"}),g!==j&&e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"text-gray-400 text-sm",children:as(r.createTime)})}),e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:rs(r.createTime)}),e.jsx("div",{className:"bg-white p-3 rounded",children:e.jsx("p",{className:"text-sm w-full break-words overflow-hidden",children:r.operationContent})})]},r.id)})})})})]})}),h==="details"&&e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#E5E7EB] z-20",children:[a.reviewButton==="1"&&e.jsxs("div",{className:"flex justify-between mt-2 mb-2",children:[e.jsxs(L,{variant:"outline",className:"border-gray-300 hover:border-gray-400 text-red-500 hover:text-red-600 px-6",onClick:Dt,disabled:N,children:[e.jsx("span",{className:"bg-red-100 rounded-full p-1 mr-2",children:e.jsx(ie,{className:"h-4 w-4 text-red-500"})}),N?"处理中...":"拒绝"]}),e.jsxs(L,{className:"bg-black hover:bg-gray-800 text-white px-6",onClick:Lt,disabled:N,children:[e.jsx(D,{className:"h-5 w-5 mr-2 text-white"}),N?"处理中...":"通过"]})]}),a.saveButton==="1"&&e.jsxs(L,{className:"w-full bg-[#001529] hover:bg-[#001529]/90 text-white rounded-full py-4",onClick:Ot,disabled:N,children:[e.jsx(ds,{className:"h-5 w-5 mr-2"}),N?"保存中...":"保存"]})]}),e.jsx(He,{open:u,onOpenChange:c,children:e.jsxs(xe,{className:"w-[320px] rounded-lg p-0 gap-0",children:[e.jsx(he,{className:"p-6 text-center",children:e.jsx(be,{className:"text-center font-normal text-base",children:"确定删除？"})}),e.jsxs(ge,{className:"flex flex-row border-t p-0",children:[e.jsx(L,{variant:"ghost",onClick:()=>c(!1),className:"flex-1 rounded-none text-gray-500 border-r h-12",children:"取消"}),e.jsx(L,{onClick:Ft,variant:"ghost",className:"flex-1 rounded-none text-blue-500 h-12",children:"确定"})]})]})}),e.jsx(He,{open:m,onOpenChange:p,children:e.jsxs(xe,{className:"w-[320px] rounded-lg p-0 gap-0",children:[e.jsx(he,{className:"p-6 text-center",children:e.jsx(be,{className:"text-center font-normal text-base",children:y})}),e.jsxs(ge,{className:"flex flex-row border-t p-0",children:[e.jsx(L,{variant:"ghost",onClick:()=>p(!1),className:"flex-1 rounded-none text-gray-500 border-r h-12",children:"取消"}),e.jsx(L,{onClick:()=>p(!1),variant:"ghost",className:"flex-1 rounded-none text-blue-500 h-12",children:"确定"})]})]})})]})}export{xa as default};
